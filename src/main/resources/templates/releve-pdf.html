<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Relevé de Compte - Ega Finance</title>
    <style>
        @page {
            margin: 1.5cm;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            color: #000000;
            background: #ffffff;
            line-height: 1.4;
            font-size: 10pt;
        }

        .document {
            max-width: 210mm;
            margin: 0 auto;
            background: white;
            padding: 30px 40px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 40px;
            padding-bottom: 20px;
        }

        .logo-section {
            flex: 0 0 200px;
        }

        .logo {
            width: 180px;
            height: 60px;
            background: linear-gradient(135deg, #047857 0%, #059669 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28pt;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .document-title-section {
            text-align: right;
            flex: 1;
        }

        .document-title {
            font-size: 16pt;
            font-weight: normal;
            font-style: italic;
            margin-bottom: 10px;
            color: #000000;
        }

        .title-underline {
            border-bottom: 2px dashed #000000;
            width: 100%;
            margin-top: 5px;
        }

        /* Introduction */
        .intro-section {
            margin-bottom: 30px;
        }

        .intro-text {
            font-size: 9pt;
            line-height: 1.6;
            margin-bottom: 15px;
            text-align: justify;
        }

        .intro-text.english {
            color: #1e3a8a;
        }

        /* Main content grid */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 30px;
            margin-bottom: 30px;
        }

        /* Account section */
        .section-title {
            font-size: 10pt;
            font-weight: bold;
            margin-bottom: 15px;
            border-bottom: 1px solid #000000;
            padding-bottom: 5px;
        }

        .account-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px;
        }

        .account-table th {
            border: 1px solid #000000;
            padding: 8px 10px;
            background: #ffffff;
            font-size: 8pt;
            font-weight: bold;
            text-align: center;
        }

        .account-table td {
            border: 1px solid #000000;
            padding: 8px 10px;
            font-size: 9pt;
            text-align: center;
        }

        .info-label {
            font-weight: bold;
            font-size: 9pt;
            margin-bottom: 5px;
        }

        .info-box {
            border: 1px solid #000000;
            padding: 12px;
            margin-bottom: 20px;
            min-height: 80px;
        }

        .bank-info {
            border: 1px solid #000000;
            padding: 10px;
            font-size: 9pt;
            text-align: center;
            line-height: 1.6;
        }

        .bank-info-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* Client info */
        .client-info {
            margin-top: 30px;
            display: flex;
            gap: 40px;
        }

        .client-label {
            font-weight: bold;
            font-size: 10pt;
            flex: 0 0 180px;
        }

        .client-value {
            font-size: 10pt;
            flex: 1;
        }

        /* Period section */
        .period-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 30px 0;
            border: 1px solid #d0d0d0;
        }

        .period-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .period-item {
            text-align: center;
        }

        .period-label {
            font-size: 8pt;
            color: #666666;
            margin-bottom: 5px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .period-value {
            font-size: 11pt;
            font-weight: bold;
            color: #000000;
        }

        /* Balance section */
        .balance-section {
            margin: 30px 0;
        }

        .balance-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .balance-card {
            border: 2px solid #e0e0e0;
            padding: 20px;
            text-align: center;
            background: white;
        }

        .balance-card.highlight {
            border-color: #047857;
            background: #f0fdf4;
        }

        .balance-label {
            font-size: 8pt;
            color: #666666;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .balance-amount {
            font-size: 18pt;
            font-weight: bold;
            color: #000000;
        }

        .balance-card.highlight .balance-amount {
            color: #047857;
        }

        .balance-currency {
            font-size: 10pt;
            margin-left: 5px;
        }

        /* Statistics */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-item {
            border: 1px solid #d0d0d0;
            padding: 15px;
            text-align: center;
            background: #fafafa;
        }

        .stat-value {
            font-size: 14pt;
            font-weight: bold;
            color: #047857;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 7pt;
            color: #666666;
            text-transform: uppercase;
        }

        /* Transactions */
        .transactions-section {
            margin-top: 30px;
        }

        .section-header {
            font-size: 11pt;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #047857;
        }

        .transactions-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 9pt;
        }

        .transactions-table thead {
            background: #047857;
            color: white;
        }

        .transactions-table th {
            border: 1px solid #047857;
            padding: 10px 8px;
            font-size: 8pt;
            font-weight: bold;
            text-align: left;
        }

        .transactions-table td {
            border: 1px solid #d0d0d0;
            padding: 10px 8px;
            vertical-align: top;
        }

        .transactions-table tbody tr:nth-child(even) {
            background: #f9f9f9;
        }

        .tx-date {
            font-weight: bold;
            font-size: 8.5pt;
        }

        .tx-time {
            font-size: 7.5pt;
            color: #666666;
        }

        .tx-type {
            display: inline-block;
            padding: 3px 8px;
            font-size: 7.5pt;
            font-weight: bold;
            border-radius: 3px;
            text-transform: uppercase;
        }

        .tx-type.depot {
            background: #d1fae5;
            color: #065f46;
        }

        .tx-type.retrait {
            background: #fee2e2;
            color: #991b1b;
        }

        .tx-type.virement {
            background: #dbeafe;
            color: #1e40af;
        }

        .tx-type.paiement {
            background: #fef3c7;
            color: #92400e;
        }

        .tx-description {
            font-size: 8.5pt;
            line-height: 1.4;
        }

        .tx-ref {
            font-size: 7.5pt;
            color: #666666;
            margin-top: 3px;
        }

        .tx-amount {
            font-weight: bold;
            text-align: right;
            font-size: 9pt;
        }

        .tx-amount.credit {
            color: #047857;
        }

        .tx-amount.debit {
            color: #dc2626;
        }

        .tx-balance {
            text-align: right;
            font-weight: bold;
            font-size: 9pt;
        }

        /* Footer */
        .footer-notes {
            margin-top: 30px;
            padding: 15px;
            border: 1px solid #d0d0d0;
            background: #fffbeb;
            font-size: 8pt;
            line-height: 1.6;
        }

        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #d0d0d0;
            text-align: center;
            font-size: 7.5pt;
            color: #666666;
        }

        .footer-brand {
            font-weight: bold;
            font-size: 9pt;
            color: #047857;
            margin-bottom: 8px;
        }

        .footer-info {
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .footer-legal {
            font-size: 7pt;
            color: #999999;
            margin-top: 10px;
        }

        @media print {
            body {
                background: white;
            }
        }
    </style>
</head>
<body>
<div class="document">

    <!-- Header -->
    <div class="header">
        <div class="logo-section">
            <div class="logo">EGA</div>
        </div>
        <div class="document-title-section">
            <div class="document-title">Relevé de Compte Bancaire</div>
            <div class="title-underline"></div>
        </div>
    </div>

    <!-- Introduction -->
    <div class="intro-section">
        <div class="intro-text">
            Ce relevé est destiné à être remis, sur leur demande, à vos créanciers ou débiteurs appelés à faire inscrire
            des opérations à votre compte (virements, paiements de quittances, etc.)
        </div>
        <div class="intro-text english">
            This document is intended to be delivered to those of your creditors or debtors who have transactions posted
            to your accounts (credit transfers, invoice payments, etc.)
        </div>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
        <!-- Left Column -->
        <div class="account-section">
            <!-- Account Identifier -->
            <div class="section-title">Identifiant national de compte bancaire - RIB</div>
            <table class="account-table">
                <thead>
                <tr>
                    <th>Code Banque</th>
                    <th>Code Guichet</th>
                    <th>Numéro de compte</th>
                    <th>Clé RIB</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td th:text="${codeBanque}">10228</td>
                    <td th:text="${codeGuichet}">00001</td>
                    <td th:text="${releve.numeroCompte}">1234567890</td>
                    <td th:text="${cleRib}">47</td>
                </tr>
                </tbody>
            </table>

            <!-- International Account Identifier -->
            <div class="section-title">Identifiant international de compte bancaire</div>
            <table class="account-table" style="margin-bottom: 15px;">
                <thead>
                <tr>
                    <th colspan="7">IBAN (International Bank Account Number)</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td th:text="${codeBanque.substring(0, 4)}">1022</td>
                    <td th:text="${releve.numeroCompte.length() >= 4 ? releve.numeroCompte.substring(0, 4) : releve.numeroCompte}">
                        1234
                    </td>
                    <td th:text="${releve.numeroCompte.length() >= 8 ? releve.numeroCompte.substring(4, 8) : '****'}">
                        5678
                    </td>
                    <td>90</td>
                </tr>
                </tbody>
            </table>

        </div>

        <!-- Right Column -->
        <div>
            <div class="info-label">Partie réservée au destinataire du relevé</div>
            <div class="info-box"></div>

            <div class="info-label">Devise</div>
            <table class="account-table" style="margin-bottom: 15px;">
                <tbody>
                <tr>
                    <td><strong>XOF (FCFA)</strong></td>
                </tr>
                </tbody>
            </table>

        </div>
    </div>

    <!-- Client Information -->
    <div class="client-info">
        <div class="client-label">TITULAIRE DU COMPTE )</div>
        <div class="client-value">
            <div th:text="${releve.clientNom + ' ' + releve.clientPrenom}">DUPONT Jean</div>
            <div th:text="${releve.clientEmail}">jean.dupont@exemple.com</div>
            <div>Lomé, Togo</div>
        </div>
    </div>

    <!-- Period Section -->
    <div class="period-section">
        <div class="period-grid">
            <div class="period-item">
                <div class="period-label">N° Relevé</div>
                <div class="period-value" th:text="${releve.numeroReleve}">REL-20260123-ABC123</div>
            </div>
            <div class="period-item">
                <div class="period-label">Période</div>
                <div class="period-value" th:text="${releve.periode}">01/01/26 - 31/01/26</div>
            </div>
            <div class="period-item">
                <div class="period-label">Date d'édition</div>
                <div class="period-value" th:text="${#temporals.format(releve.dateGeneration, 'dd/MM/yyyy')}">
                    23/01/2026
                </div>
            </div>
        </div>
    </div>

    <!-- Balance Section -->
    <div class="balance-section">
        <div class="balance-grid">
            <div class="balance-card">
                <div class="balance-label">Solde d'Ouverture</div>
                <div class="balance-amount">
                    <span th:text="${#numbers.formatDecimal(releve.soldeInitial, 0, 'COMMA', 0, 'POINT')}">150,000</span>
                    <span class="balance-currency">FCFA</span>
                </div>
            </div>

            <div class="balance-card highlight">
                <div class="balance-label">Solde de Clôture</div>
                <div class="balance-amount">
                    <span th:text="${#numbers.formatDecimal(releve.soldeFinal, 0, 'COMMA', 0, 'POINT')}">175,000</span>
                    <span class="balance-currency">FCFA</span>
                </div>
            </div>

            <div class="balance-card">
                <div class="balance-label">Variation</div>
                <div class="balance-amount"
                     th:style="${releve.variation >= 0 ? 'color: #047857' : 'color: #dc2626'}">
                    <span th:text="${(releve.variation >= 0 ? '+' : '') + #numbers.formatDecimal(releve.variation, 0, 'COMMA', 0, 'POINT')}">+25,000</span>
                    <span class="balance-currency">FCFA</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics -->
    <div class="stats-section" th:if="${releve.statistiques != null}">
        <div class="stat-item">
            <div class="stat-value" th:text="${releve.statistiques.nombreTransactions}">12</div>
            <div class="stat-label">Opérations</div>
        </div>
        <div class="stat-item">
            <div class="stat-value"
                 th:text="${#numbers.formatDecimal(releve.statistiques.totalDepots, 0, 'COMMA', 0, 'POINT')}">50,000
            </div>
            <div class="stat-label">Total Dépôts</div>
        </div>
        <div class="stat-item">
            <div class="stat-value"
                 th:text="${#numbers.formatDecimal(releve.statistiques.totalRetraits, 0, 'COMMA', 0, 'POINT')}">25,000
            </div>
            <div class="stat-label">Total Retraits</div>
        </div>
        <div class="stat-item">
            <div class="stat-value"
                 th:text="${#numbers.formatDecimal(releve.statistiques.totalVirements, 0, 'COMMA', 0, 'POINT')}">10,000
            </div>
            <div class="stat-label">Total Virements</div>
        </div>
    </div>

    <!-- Transactions -->
    <div class="transactions-section">
        <div class="section-header">Détail des Opérations</div>

        <table class="transactions-table">
            <thead>
            <tr>
                <th style="width: 10%;">Date</th>
                <th style="width: 12%;">Type</th>
                <th style="width: 40%;">Libellé</th>
                <th style="width: 18%; text-align: right;">Montant (FCFA)</th>
                <th style="width: 20%; text-align: right;">Solde (FCFA)</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="tx : ${releve.transactions}">
                <td>
                    <div class="tx-date" th:text="${#temporals.format(tx.date, 'dd/MM/yyyy')}">23/01/2026</div>
                    <div class="tx-time" th:text="${#temporals.format(tx.date, 'HH:mm')}">14:30</div>
                </td>
                <td>
                        <span class="tx-type"
                              th:classappend="${#strings.toLowerCase(tx.type)}"
                              th:text="${tx.type}">DEPOT</span>
                </td>
                <td>
                    <div class="tx-description" th:text="${tx.description}">Dépôt d'espèces au guichet</div>
                    <div class="tx-ref" th:if="${tx.compteContrePartie != null}"
                         th:text="${'Réf: ' + tx.compteContrePartie}">
                    </div>
                </td>
                <td>
                    <div class="tx-amount"
                         th:classappend="${tx.sens == 'CREDIT' ? 'credit' : 'debit'}"
                         th:text="${(tx.sens == 'CREDIT' ? '+' : '-') + ' ' + #numbers.formatDecimal(tx.montant, 0, 'COMMA', 0, 'POINT')}">
                        + 10,000
                    </div>
                </td>
                <td>
                    <div class="tx-balance"
                         th:text="${#numbers.formatDecimal(tx.soldeApres, 0, 'COMMA', 0, 'POINT')}">160,000
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Footer Notes -->
    <div class="footer-notes">
        <strong>MENTIONS IMPORTANTES :</strong> Ce relevé récapitule les mouvements enregistrés sur votre compte durant
        la période indiquée. Toute contestation doit être formulée par écrit dans un délai de 30 jours. Pour toute
        information, contactez votre conseiller ou notre service clientèle au +228 22 XX XX XX.
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="footer-brand">EGA FINANCE</div>
        <div class="footer-info">
            Service Client: +228 22 XX XX XX | Email: contact@egafinance.tg | Web: www.egafinance.tg<br/>
            Boulevard du 13 Janvier, Lomé - Togo
        </div>
        <div class="footer-legal">
            Document généré le <span th:text="${#temporals.format(releve.dateGeneration, 'dd/MM/yyyy à HH:mm')}">23/01/2026 à 14:30</span><br/>
            Ega Finance S.A. - Capital social: 5.000.000.000 FCFA - RC: TG-LOM-01-2020-B12-12345
        </div>
    </div>

</div>
</body>
</html>